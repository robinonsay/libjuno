<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LibJuno: /home/runner/work/libjuno/libjuno/examples/example_project/engine/include/engine_app/engine_app.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeDarkModeToggle.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeParagraphLink.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeInteractiveToc.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeTabs.init()
  </script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2K3RX3SR87"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-2K3RX3SR87');
  </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="juno_logo_1.svg"/></td>
  <td id="projectalign">
   <div id="projectname">LibJuno<span id="projectnumber">&#160;1.1.0</span>
   </div>
   <div id="projectbrief">LibJuno is a lightweight C99 library designed specifically for embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('engine__app_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">engine_app.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="log__api_8h_source.html">juno/log/log_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="broker__api_8h_source.html">juno/sb/broker_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="status_8h_source.html">juno/status.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="module_8h_source.html">juno/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="app__api_8h_source.html">juno/app/app_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="engine__cmd__msg_8h_source.html">engine_app/engine_cmd_msg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="time__api_8h_source.html">juno/time/time_api.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for engine_app.h:</div>
<div class="dyncontent">
<div class="center"><img src="engine__app_8h__incl.png" border="0" usemap="#a_2home_2runner_2work_2libjuno_2libjuno_2examples_2example__project_2engine_2include_2engine__app_2engine__app_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="engine__app_8h__dep__incl.png" border="0" usemap="#a_2home_2runner_2work_2libjuno_2libjuno_2examples_2example__project_2engine_2include_2engine__app_2engine__app_8hdep" alt=""/></div>
</div>
</div>
<p><a href="engine__app_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6528d7a500b07e3c59309ecb7406beb8" id="r_a6528d7a500b07e3c59309ecb7406beb8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="engine__app_8h.html#a6528d7a500b07e3c59309ecb7406beb8">ENGINE_CMD_MSG_PIPE_DEPTH</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="separator:a6528d7a500b07e3c59309ecb7406beb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adfc71973e68539e8461689f81271a2e8" id="r_adfc71973e68539e8461689f81271a2e8"><td class="memItemLeft" align="right" valign="top">typedef struct ENGINE_APP_TAG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="engine__app_8h.html#adfc71973e68539e8461689f81271a2e8">ENGINE_APP_T</a></td></tr>
<tr class="separator:adfc71973e68539e8461689f81271a2e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6e2cd87f4e2190dfe45307bebcd7aebc" id="r_a6e2cd87f4e2190dfe45307bebcd7aebc"><td class="memItemLeft" align="right" valign="top">struct ENGINE_APP_TAG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="engine__app_8h.html#a6e2cd87f4e2190dfe45307bebcd7aebc">JUNO_MODULE_DERIVE</a> (<a class="el" href="app__api_8h.html#af4d1371636773a3186696687c684db54">JUNO_APP_ROOT_T</a>, const <a class="el" href="log__api_8h.html#a006301174348e71fde021a376106f756">JUNO_LOG_ROOT_T</a> *ptLogger;const <a class="el" href="group__juno__time.html#gaefeb9d6509263f33b8586b99ae66bcac">JUNO_TIME_ROOT_T</a> *ptTime;<a class="el" href="broker__api_8h.html#a18f8e3cdde5d600227ecc8fae74e1dd2">JUNO_SB_BROKER_ROOT_T</a> *ptBroker;<a class="el" href="engine__cmd__msg_8h.html#ab1bb582288369e580705e8b6e0a3d93f">ENGINE_CMD_MSG_T</a> ptArrCmdBuffer[<a class="el" href="engine__app_8h.html#a6528d7a500b07e3c59309ecb7406beb8">ENGINE_CMD_MSG_PIPE_DEPTH</a>];ENGINE_CMD_MSG_ARRAY_T tCmdArray;<a class="el" href="broker__api_8h.html#abd1ae51793446030c54d77cce75edce2">JUNO_SB_PIPE_T</a> tCmdPipe;float fCurrentRpm;)</td></tr>
<tr class="separator:a6e2cd87f4e2190dfe45307bebcd7aebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02e2300210188645a8b0fa95c8223d7" id="r_ac02e2300210188645a8b0fa95c8223d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__juno__status.html#ga37f8e6b135f0c1a21a3a34b19d1772aa">JUNO_STATUS_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="engine__app_8h.html#ac02e2300210188645a8b0fa95c8223d7">EngineApp_Init</a> (<a class="el" href="engine__app_8h.html#adfc71973e68539e8461689f81271a2e8">ENGINE_APP_T</a> *ptEngineApp, const <a class="el" href="log__api_8h.html#a006301174348e71fde021a376106f756">JUNO_LOG_ROOT_T</a> *ptLogger, const <a class="el" href="group__juno__time.html#gaefeb9d6509263f33b8586b99ae66bcac">JUNO_TIME_ROOT_T</a> *ptTime, <a class="el" href="broker__api_8h.html#a18f8e3cdde5d600227ecc8fae74e1dd2">JUNO_SB_BROKER_ROOT_T</a> *ptBroker, <a class="el" href="group__juno__status.html#ga0fbff8c7db15c2f4d01e82b8a863dbbc">JUNO_FAILURE_HANDLER_T</a> pfcnFailureHandler, <a class="el" href="group__juno__status.html#gaf575dc984c80091757afe42a5d5c2b60">JUNO_USER_DATA_T</a> *pvUserData)</td></tr>
<tr class="separator:ac02e2300210188645a8b0fa95c8223d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6528d7a500b07e3c59309ecb7406beb8" name="a6528d7a500b07e3c59309ecb7406beb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6528d7a500b07e3c59309ecb7406beb8">&#9670;&#160;</a></span>ENGINE_CMD_MSG_PIPE_DEPTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENGINE_CMD_MSG_PIPE_DEPTH&#160;&#160;&#160;(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="adfc71973e68539e8461689f81271a2e8" name="adfc71973e68539e8461689f81271a2e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfc71973e68539e8461689f81271a2e8">&#9670;&#160;</a></span>ENGINE_APP_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct ENGINE_APP_TAG <a class="el" href="engine__app_8h.html#adfc71973e68539e8461689f81271a2e8">ENGINE_APP_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This API has been generated by LibJuno: <a href="https://www.robinonsay.com/libjuno/">https://www.robinonsay.com/libjuno/</a> This header contains the engine_app library API </p><dl class="section author"><dt>Author</dt><dd>Robin Onsay DOC </dd></dl>
<h3><a class="anchor" id="autotoc_md57"></a>
The Engine Application</h3>
<p>Next we will be going over a typical LibJuno application. For this tutorial project we are defining an engine application that manages the engine hardware for our car. In this example the engine needs to receive a command for the RPM and telemeter the actual RPM of the engine.</p>
<h2><a class="anchor" id="autotoc_md58"></a>
Deriving an Application</h2>
<p>Applications in LibJuno are derived from the application root. This provides a common API for applications to utilize. A standard application has three lifecycle functions:</p><ol type="1">
<li>OnStart: The first function called in the application. It is called only once at the beginning of the application lifecycle. This is where developers would initialize resources that will be utilized by the application</li>
<li>OnProcess: This is the "main run-loop" function of the application. This function is called by the main run-time in a loop and is the primary run function of the app.</li>
<li>OnExit: This is the last function called by the application. This is where developers would clean up resources allocated by the application. A typical runtime would call application exit functions when the software is closing.</li>
</ol>
<h2><a class="anchor" id="autotoc_md59"></a>
The Application Structure</h2>
<p>Within the derived application users are expected to place pointers to dependencies they require from the main runtime and hold resources the application needs to own and pass from one lifecycle event to the next. In this case the engine app needs the following from the runtime: Logger Time Broker</p>
<p>And the application needs to allocate: A command buffer for engine commands. This is a memory allocation for commands that will be received by the application A command pipe. This is the module that manages the command buffer The current RPM. This is the current state of our engine. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac02e2300210188645a8b0fa95c8223d7" name="ac02e2300210188645a8b0fa95c8223d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac02e2300210188645a8b0fa95c8223d7">&#9670;&#160;</a></span>EngineApp_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__juno__status.html#ga37f8e6b135f0c1a21a3a34b19d1772aa">JUNO_STATUS_T</a> EngineApp_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="engine__app_8h.html#adfc71973e68539e8461689f81271a2e8">ENGINE_APP_T</a> *&#160;</td>
          <td class="paramname"><em>ptJunoApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="log__api_8h.html#a006301174348e71fde021a376106f756">JUNO_LOG_ROOT_T</a> *&#160;</td>
          <td class="paramname"><em>ptLogger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__juno__time.html#gaefeb9d6509263f33b8586b99ae66bcac">JUNO_TIME_ROOT_T</a> *&#160;</td>
          <td class="paramname"><em>ptTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="broker__api_8h.html#a18f8e3cdde5d600227ecc8fae74e1dd2">JUNO_SB_BROKER_ROOT_T</a> *&#160;</td>
          <td class="paramname"><em>ptBroker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__juno__status.html#ga0fbff8c7db15c2f4d01e82b8a863dbbc">JUNO_FAILURE_HANDLER_T</a>&#160;</td>
          <td class="paramname"><em>pfcnFailureHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__juno__status.html#gaf575dc984c80091757afe42a5d5c2b60">JUNO_USER_DATA_T</a> *&#160;</td>
          <td class="paramname"><em>pvFailureUserData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DOC </p>
<h4><a class="anchor" id="autotoc_md60"></a>
The App Init Function</h4>
<p>The application also needs to provide a concrete application initialization function. This function sets dependencies and the API pointers within the application. The application has an internal "Verify" function that checks if any of these dependencies are null.</p>
<p>DOC </p>
<h3><a class="anchor" id="autotoc_md65"></a>
The Application Init Function</h3>
<p>The init function's primary responsibility is to assign dependencies. This function enables the <code><a class="el" href="main_8c.html">main.c</a></code> project composition root to pass application dependencies to the application. This function is a concrete implementation because it depends entirely on application specifics.</p>
<p>This function asserts the module pointer exists, assigns the dependency pointers, and finally calls the verification function. The verification function is called last because it assumes the pointers have been instantiated. </p>

</div>
</div>
<a id="a6e2cd87f4e2190dfe45307bebcd7aebc" name="a6e2cd87f4e2190dfe45307bebcd7aebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e2cd87f4e2190dfe45307bebcd7aebc">&#9670;&#160;</a></span>JUNO_MODULE_DERIVE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct ENGINE_APP_TAG JUNO_MODULE_DERIVE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="app__api_8h.html#af4d1371636773a3186696687c684db54">JUNO_APP_ROOT_T</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="log__api_8h.html#a006301174348e71fde021a376106f756">JUNO_LOG_ROOT_T</a> *ptLogger;const <a class="el" href="group__juno__time.html#gaefeb9d6509263f33b8586b99ae66bcac">JUNO_TIME_ROOT_T</a> *ptTime;<a class="el" href="broker__api_8h.html#a18f8e3cdde5d600227ecc8fae74e1dd2">JUNO_SB_BROKER_ROOT_T</a> *ptBroker;<a class="el" href="engine__cmd__msg_8h.html#ab1bb582288369e580705e8b6e0a3d93f">ENGINE_CMD_MSG_T</a> ptArrCmdBuffer;ENGINE_CMD_MSG_ARRAY_T tCmdArray;<a class="el" href="broker__api_8h.html#abd1ae51793446030c54d77cce75edce2">JUNO_SB_PIPE_T</a> tCmdPipe;float fCurrentRpm;&#160;</td>
          <td class="paramname">[ENGINE_CMD_MSG_PIPE_DEPTH]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_f912fe267e7cfa62dd13fe63a536e0de.html">example_project</a></li><li class="navelem"><a class="el" href="dir_1f5417f6f28478589e6e706f38a58164.html">engine</a></li><li class="navelem"><a class="el" href="dir_9a9a42e28ad05cf325956cd87917dd50.html">include</a></li><li class="navelem"><a class="el" href="dir_74725b4cb8c52cb49e1151c2d47133d7.html">engine_app</a></li><li class="navelem"><a class="el" href="engine__app_8h.html">engine_app.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
