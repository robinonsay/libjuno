<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LibJuno: Juno Memory Module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeDarkModeToggle.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeParagraphLink.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeInteractiveToc.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeTabs.init()
  </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="juno_logo_1.svg"/></td>
  <td id="projectalign">
   <div id="projectname">LibJuno<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">LibJuno is a lightweight C99 library designed specifically for embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2home_2runner_2work_2libjuno_2libjuno_2include_2juno_2memory_2README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Juno Memory Module</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> The Juno Memory Module provides a unified API for memory management in embedded systems. It supports both generic memory allocation and fixed-size block-based allocation. The design is tailored for embedded projects, ensuring flexibility, deterministic failure handling, and future extensibility.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md2"></a>
Overview</h1>
<ul>
<li><b>Generic Memory Allocation</b> <br  />
 The generic API offers functions to:<ul>
<li><b>Allocate:</b> <code>Juno_MemoryGet</code></li>
<li><b>Update:</b> <code>Juno_MemoryUpdate</code> (when using block allocation, it checks that the new size fits within the fixed block size)</li>
<li><b>Free:</b> <code>Juno_MemoryPut</code></li>
</ul>
</li>
<li><p class="startli"><b>Block-Based Memory Allocation</b> <br  />
 This implementation manages a pre-allocated, fixed-size memory pool. You declare the memory region and associated metadata with the provided macros:</p><ul>
<li><code>JUNO_MEMORY_BLOCK(name, type, length)</code> <br  />
</li>
<li><code>JUNO_MEMORY_BLOCK_METADATA(name, length)</code></li>
</ul>
<p class="startli">The block allocator is initialized using <code>Juno_MemoryBlkInit</code>, which sets up the memory block structure, free stack, block size, and an optional failure handler callback.</p>
</li>
<li><b>Failure Handling</b> <br  />
 The module employs a failure callback (of type <code>JUNO_FAILURE_HANDLER_T</code> as defined in <code><a class="el" href="status_8h_source.html">juno/status.h</a></code>) to handle errors deterministically in allocation, update, or free operations. This callback receives:<ul>
<li>The error status.</li>
<li>A custom message.</li>
<li>Optional user data.</li>
</ul>
</li>
<li><b>Custom Allocators (JUNO_CUSTOM_ALLOC)</b> <br  />
 By default, the memory module declares the union <code>JUNO_MEMORY_ALLOC_T</code> which contains both a generic header (<code>tHdr</code>) and a block-based allocator (<code>tBlock</code>). <br  />
 If the macro <code>JUNO_CUSTOM_ALLOC</code> is defined, the module expects the developer to provide their own definitions for memory allocation types. This allows for integration with external/custom memory managers without being tied to the default union and its implementations.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
Data Structures</h1>
<p>The key structures and macros are defined in <a class="el" href="memory__types_8h_source.html">memory_types.h</a>:</p>
<ul>
<li><b>JUNO_MEMORY_BLOCK_T</b> <br  />
 This structure holds details of block-based allocation such as:<ul>
<li>Pointer to the memory area.</li>
<li>Pointer to the metadata array.</li>
<li>Block size (<code>zTypeSize</code>), total number of blocks (<code>zLength</code>), blocks used (<code>zUsed</code>) and blocks freed (<code>zFreed</code>).</li>
<li>A failure handler defined using the macro <code>DECLARE_FAILURE_HANDLER</code>.</li>
</ul>
</li>
<li><b>JUNO_MEMORY_ALLOC_T</b> <br  />
 If <code>JUNO_CUSTOM_ALLOC</code> is not defined, this union is declared to accommodate multiple allocation types (currently block-based). If <code>JUNO_CUSTOM_ALLOC</code> is defined, you must provide your own implementation of allocation types.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md6"></a>
How to Use</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
1. Declare Memory Blocks &amp; Metadata</h2>
<p>Define your memory blocks and metadata arrays using the supplied macros:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;juno/memory/memory.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/memory_types.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/status.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>MY_BLOCK_TAG {</div>
<div class="line">    <span class="keywordtype">int</span> id;</div>
<div class="line">    <span class="keywordtype">char</span> data[32];</div>
<div class="line">} MY_BLOCK_T;</div>
<div class="line"> </div>
<div class="line">JUNO_MEMORY_BLOCK(myBlock, MY_BLOCK_T, 20);</div>
<div class="line">JUNO_MEMORY_BLOCK_METADATA(myMetadata, 20);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
2. Initialize the Block Allocator</h2>
<p>Initialize the block-based memory allocator with its memory region, metadata, block size, and (optionally) a failure handler. For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_struct" href="structJUNO__MEMORY__BLOCK__TAG.html">JUNO_MEMORY_BLOCK_T</a> memBlock = {0};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize block allocator; pass NULL for a failure handler if not needed.</span></div>
<div class="line">    JUNO_STATUS_T status = Juno_MemoryBlkInit(</div>
<div class="line">        &amp;memBlock,</div>
<div class="line">        myBlock,</div>
<div class="line">        myMetadata,</div>
<div class="line">        <span class="keyword">sizeof</span>(MY_BLOCK_T),</div>
<div class="line">        20,</div>
<div class="line">        NULL,    <span class="comment">// No failure callback</span></div>
<div class="line">        NULL     <span class="comment">// No user data</span></div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Memory block initialization failed!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Continue using the allocator...</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="astructJUNO__MEMORY__BLOCK__TAG_html"><div class="ttname"><a href="structJUNO__MEMORY__BLOCK__TAG.html">JUNO_MEMORY_BLOCK_TAG</a></div><div class="ttdoc">Structure representing a block-based memory allocator. Manages a fixed-size memory area along with as...</div><div class="ttdef"><b>Definition</b> memory_types.h:64</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
3. Allocate, Update, and Free Memory Blocks</h2>
<p>Use the block-specific functions to manage memory allocations:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> useMemoryBlocks(<a class="code hl_struct" href="structJUNO__MEMORY__BLOCK__TAG.html">JUNO_MEMORY_BLOCK_T</a> *memBlock) {</div>
<div class="line">    <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> memDesc = {0};</div>
<div class="line">    JUNO_STATUS_T status = Juno_MemoryBlkGet(memBlock, &amp;memDesc);</div>
<div class="line">    <span class="keywordflow">if</span> (status == JUNO_STATUS_SUCCESS &amp;&amp; memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a> != NULL) {</div>
<div class="line">        MY_BLOCK_T *pData = (MY_BLOCK_T *)memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a>;</div>
<div class="line">        pData-&gt;id = 42;</div>
<div class="line">        snprintf(pData-&gt;data, <span class="keyword">sizeof</span>(pData-&gt;data), <span class="stringliteral">&quot;Hello Juno!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;Allocated Block: ID %d, Data: %s\n&quot;</span>, pData-&gt;id, pData-&gt;data);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Try updating the block; the update verifies that the new size does not exceed the fixed size.</span></div>
<div class="line">        status = Juno_MemoryBlkUpdate(memBlock, &amp;memDesc, <span class="keyword">sizeof</span>(MY_BLOCK_T));</div>
<div class="line">        <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Block update failed!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Free the block.</span></div>
<div class="line">        status = Juno_MemoryBlkPut(memBlock, &amp;memDesc);</div>
<div class="line">        <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Block free failed!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Block allocation failed!\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="astructJUNO__MEMORY__TAG_html"><div class="ttname"><a href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_TAG</a></div><div class="ttdoc">Structure for an allocated memory segment. Describes the allocated memory with a pointer to the start...</div><div class="ttdef"><b>Definition</b> memory_types.h:56</div></div>
<div class="ttc" id="astructJUNO__MEMORY__TAG_html_a410362e1eb4aa6c8ace8c6f369c6fe2a"><div class="ttname"><a href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">JUNO_MEMORY_TAG::pvAddr</a></div><div class="ttdeci">void * pvAddr</div><div class="ttdoc">Pointer to the allocated memory.</div><div class="ttdef"><b>Definition</b> memory_types.h:57</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
4. Using the Generic Memory API</h2>
<p>You can initialize a <code>JUNO_MEMORY_ALLOC_T</code> directly using the block implementation. This allows you to use the generic allocator functions seamlessly:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/memory.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/memory_types.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/alloc.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/status.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define a custom type for the memory block.</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>MY_BLOCK_TAG {</div>
<div class="line">    <span class="keywordtype">int</span> id;</div>
<div class="line">    <span class="keywordtype">char</span> data[32];</div>
<div class="line">} MY_BLOCK_T;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Declare memory block and metadata arrays.</span></div>
<div class="line">JUNO_MEMORY_BLOCK(myBlock, MY_BLOCK_T, 20);</div>
<div class="line">JUNO_MEMORY_BLOCK_METADATA(myMetadata, 20);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// Initialize the generic allocator with the block implementation.</span></div>
<div class="line">    <a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> myAlloc = {0};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use the tBlock member to initialize the block allocator.</span></div>
<div class="line">    JUNO_STATUS_T status = Juno_MemoryBlkInit(</div>
<div class="line">        &amp;myAlloc.<a class="code hl_variable" href="unionJUNO__MEMORY__ALLOC__TAG.html#ac0788fdefb10deeee78f04fb411e3fe4">tBlock</a>,     <span class="comment">// Initialize using the tBlock member of the union</span></div>
<div class="line">        myBlock,</div>
<div class="line">        myMetadata,</div>
<div class="line">        <span class="keyword">sizeof</span>(MY_BLOCK_T),</div>
<div class="line">        20,</div>
<div class="line">        NULL,    <span class="comment">// No failure callback.</span></div>
<div class="line">        NULL     <span class="comment">// No user data.</span></div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Memory block initialization failed!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Allocate memory using the generic API.</span></div>
<div class="line">    <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> memDesc = {0};</div>
<div class="line">    status = Juno_MemoryGet(&amp;myAlloc, &amp;memDesc, <span class="keyword">sizeof</span>(MY_BLOCK_T));</div>
<div class="line">    <span class="keywordflow">if</span> (status == JUNO_STATUS_SUCCESS &amp;&amp; memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a> != NULL) {</div>
<div class="line">        MY_BLOCK_T *pData = (MY_BLOCK_T *)memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a>;</div>
<div class="line">        pData-&gt;id = 7;</div>
<div class="line">        snprintf(pData-&gt;data, <span class="keyword">sizeof</span>(pData-&gt;data), <span class="stringliteral">&quot;Generic Alloc!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;Allocated Block: ID %d, Data: %s\n&quot;</span>, pData-&gt;id, pData-&gt;data);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Optionally update memory using the generic update API.</span></div>
<div class="line">        status = Juno_MemoryUpdate(&amp;myAlloc, &amp;memDesc, <span class="keyword">sizeof</span>(MY_BLOCK_T));</div>
<div class="line">        <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Memory update failed!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Free the memory using the generic free API.</span></div>
<div class="line">        status = Juno_MemoryPut(&amp;myAlloc, &amp;memDesc);</div>
<div class="line">        <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Memory free failed!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Memory allocation failed!\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aunionJUNO__MEMORY__ALLOC__TAG_html"><div class="ttname"><a href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_TAG</a></div><div class="ttdoc">Union for a generic memory allocation. Accommodates various allocation types, currently including blo...</div><div class="ttdef"><b>Definition</b> memory_types.h:79</div></div>
<div class="ttc" id="aunionJUNO__MEMORY__ALLOC__TAG_html_ac0788fdefb10deeee78f04fb411e3fe4"><div class="ttname"><a href="unionJUNO__MEMORY__ALLOC__TAG.html#ac0788fdefb10deeee78f04fb411e3fe4">JUNO_MEMORY_ALLOC_TAG::tBlock</a></div><div class="ttdeci">JUNO_MEMORY_BLOCK_T tBlock</div><div class="ttdoc">Block-based allocation structure.</div><div class="ttdef"><b>Definition</b> memory_types.h:81</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11"></a>
5. Example: Using a Failure Handler</h2>
<p>The failure handler enables deterministic error management. For example, the following code demonstrates a callback that logs errors to <code>stderr</code>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/status.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Callback function matching JUNO_FAILURE_HANDLER_T signature.</span></div>
<div class="line"><span class="keywordtype">void</span> myFailureHandler(JUNO_STATUS_T tStatus, <span class="keyword">const</span> <span class="keywordtype">char</span> *pcCustomMessage, JUNO_USER_DATA_T *pvUserData) {</div>
<div class="line">    (void)pvUserData;  <span class="comment">// Unused in this example.</span></div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;Memory Error (code %d): %s\n&quot;</span>, tStatus, pcCustomMessage);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>MY_BLOCK_TAG {</div>
<div class="line">    <span class="keywordtype">int</span> id;</div>
<div class="line">    <span class="keywordtype">char</span> data[32];</div>
<div class="line">} MY_BLOCK_T;</div>
<div class="line"> </div>
<div class="line">JUNO_MEMORY_BLOCK(myBlock, MY_BLOCK_T, 10);</div>
<div class="line">JUNO_MEMORY_BLOCK_METADATA(myMetadata, 10);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_struct" href="structJUNO__MEMORY__BLOCK__TAG.html">JUNO_MEMORY_BLOCK_T</a> memBlock = {0};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize block allocator with a failure handler.</span></div>
<div class="line">    JUNO_STATUS_T status = Juno_MemoryBlkInit(</div>
<div class="line">        &amp;memBlock,</div>
<div class="line">        myBlock,</div>
<div class="line">        myMetadata,</div>
<div class="line">        <span class="keyword">sizeof</span>(MY_BLOCK_T),</div>
<div class="line">        10,</div>
<div class="line">        myFailureHandler,  <span class="comment">// Custom failure callback.</span></div>
<div class="line">        NULL               <span class="comment">// No additional user data.</span></div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Memory block initialization failed!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Force an error scenario: attempt to update memory with a size larger than allowed.</span></div>
<div class="line">    <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> memDesc = {0};</div>
<div class="line">    status = Juno_MemoryBlkGet(&amp;memBlock, &amp;memDesc);</div>
<div class="line">    <span class="keywordflow">if</span> (status == JUNO_STATUS_SUCCESS) {</div>
<div class="line">        <span class="comment">// Intentionally request a size that exceeds the fixed block size.</span></div>
<div class="line">        status = Juno_MemoryBlkUpdate(&amp;memBlock, &amp;memDesc, <span class="keyword">sizeof</span>(MY_BLOCK_T) + 10);</div>
<div class="line">        <span class="comment">// If the size is too large, the failure handler will be invoked.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Free the block if it was allocated.</span></div>
<div class="line">    Juno_MemoryBlkPut(&amp;memBlock, &amp;memDesc);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Using the API</h2>
<p>The Juno Memory Module exposes its operations through function pointer APIs, allowing downstream code to remain agnostic to the underlying allocation method. This design means that whether you're using the default block-based allocator or a fully custom implementation, the API remains the same.</p>
<p>The module provides two primary API structures:</p>
<ul>
<li><b>Generic Memory API:</b> <br  />
 Obtain this API using the function <code>Juno_MemoryApi()</code>. It provides function pointers for the generic operations:<ul>
<li><code>Get</code> – to allocate memory.</li>
<li><code>Update</code> – to update (or reallocate) memory.</li>
<li><code>Put</code> – to free memory.</li>
</ul>
</li>
<li><b>Block-Based Memory API:</b> <br  />
 Accessed via <code>Juno_MemoryBlkApi()</code>, this API primarily offers an initialization function (<code>Init</code>) for block-based allocators.</li>
</ul>
<p>Below is an example demonstrating how to use the generic API to allocate, update, and free memory from a block-based allocator:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/memory.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/memory_types.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/alloc.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/memory_api.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/status.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define a custom block type</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>MY_BLOCK_TAG {</div>
<div class="line">    <span class="keywordtype">int</span> id;</div>
<div class="line">    <span class="keywordtype">char</span> data[32];</div>
<div class="line">} MY_BLOCK_T;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Declare static memory block and metadata using provided macros</span></div>
<div class="line">JUNO_MEMORY_BLOCK(myBlock, MY_BLOCK_T, 20);</div>
<div class="line">JUNO_MEMORY_BLOCK_METADATA(myMetadata, 20);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// Initialize the block-based allocator</span></div>
<div class="line">    <a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> memBlock = {0};</div>
<div class="line">    JUNO_STATUS_T status = Juno_MemoryBlkInit(</div>
<div class="line">        &amp;memBlock.<a class="code hl_variable" href="unionJUNO__MEMORY__ALLOC__TAG.html#ac0788fdefb10deeee78f04fb411e3fe4">tBlock</a>,</div>
<div class="line">        myBlock,</div>
<div class="line">        myMetadata,</div>
<div class="line">        <span class="keyword">sizeof</span>(MY_BLOCK_T),</div>
<div class="line">        20,</div>
<div class="line">        NULL,   <span class="comment">// No failure handler in this example</span></div>
<div class="line">        NULL</div>
<div class="line">    );</div>
<div class="line">    <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Block allocator initialization failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Retrieve the generic memory API, which abstracts the underlying allocation method.</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_struct" href="structJUNO__MEMORY__API__TAG.html">JUNO_MEMORY_API_T</a> *pApi = Juno_MemoryApi();</div>
<div class="line">    <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> memDesc = {0};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Allocate a memory block using the generic Get API.</span></div>
<div class="line">    status = pApi-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__API__TAG.html#a2bcb7fbc87a024a6386e76b9d26cf751">Get</a>(&amp;memBlock, &amp;memDesc, <span class="keyword">sizeof</span>(MY_BLOCK_T));</div>
<div class="line">    <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS || memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a> == NULL) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Memory allocation failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use the allocated memory.</span></div>
<div class="line">    MY_BLOCK_T *pBlock = (MY_BLOCK_T *)memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a>;</div>
<div class="line">    pBlock-&gt;id = 100;</div>
<div class="line">    strcpy(pBlock-&gt;data, <span class="stringliteral">&quot;Using API function pointers&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Allocated Block: ID %d, Data: %s\n&quot;</span>, pBlock-&gt;id, pBlock-&gt;data);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Update the memory block (for block-based allocation this validates that the new size fits).</span></div>
<div class="line">    status = pApi-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__API__TAG.html#aa87138a9c0fe6be63a92c9f12fd9d82b">Update</a>(&amp;memBlock, &amp;memDesc, <span class="keyword">sizeof</span>(MY_BLOCK_T));</div>
<div class="line">    <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Memory update failed\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Free the allocated block using the generic Put API.</span></div>
<div class="line">    status = pApi-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__API__TAG.html#ac4f01d949fe0959517d8da164b581cfd">Put</a>(&amp;memBlock, &amp;memDesc);</div>
<div class="line">    <span class="keywordflow">if</span> (status != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Memory free failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="astructJUNO__MEMORY__API__TAG_html"><div class="ttname"><a href="structJUNO__MEMORY__API__TAG.html">JUNO_MEMORY_API_TAG</a></div><div class="ttdoc">API for generic memory allocation operations.</div><div class="ttdef"><b>Definition</b> memory_api.h:20</div></div>
<div class="ttc" id="astructJUNO__MEMORY__API__TAG_html_a2bcb7fbc87a024a6386e76b9d26cf751"><div class="ttname"><a href="structJUNO__MEMORY__API__TAG.html#a2bcb7fbc87a024a6386e76b9d26cf751">JUNO_MEMORY_API_TAG::Get</a></div><div class="ttdeci">JUNO_STATUS_T(* Get)(JUNO_MEMORY_ALLOC_T *ptMem, JUNO_MEMORY_T *pvRetAddr, size_t zSize)</div><div class="ttdoc">Allocates memory using the specified memory allocation method.</div><div class="ttdef"><b>Definition</b> memory_api.h:27</div></div>
<div class="ttc" id="astructJUNO__MEMORY__API__TAG_html_aa87138a9c0fe6be63a92c9f12fd9d82b"><div class="ttname"><a href="structJUNO__MEMORY__API__TAG.html#aa87138a9c0fe6be63a92c9f12fd9d82b">JUNO_MEMORY_API_TAG::Update</a></div><div class="ttdeci">JUNO_STATUS_T(* Update)(JUNO_MEMORY_ALLOC_T *ptMem, JUNO_MEMORY_T *ptMemory, size_t zNewSize)</div><div class="ttdoc">Updates an existing memory allocation to a new size.</div><div class="ttdef"><b>Definition</b> memory_api.h:35</div></div>
<div class="ttc" id="astructJUNO__MEMORY__API__TAG_html_ac4f01d949fe0959517d8da164b581cfd"><div class="ttname"><a href="structJUNO__MEMORY__API__TAG.html#ac4f01d949fe0959517d8da164b581cfd">JUNO_MEMORY_API_TAG::Put</a></div><div class="ttdeci">JUNO_STATUS_T(* Put)(JUNO_MEMORY_ALLOC_T *ptMem, JUNO_MEMORY_T *pvAddr)</div><div class="ttdoc">Frees an allocated memory block.</div><div class="ttdef"><b>Definition</b> memory_api.h:42</div></div>
</div><!-- fragment --><p>In this example:</p>
<ul>
<li>We initialize a block-based allocator.</li>
<li>We retrieve the generic API using <code>Juno_MemoryApi()</code>.</li>
<li>We invoke the <code>Get</code>, <code>Update</code>, and <code>Put</code> functions through the API, which internally dispatch to the block-based implementation (or any other implementation if replaced).</li>
</ul>
<p>Downstream consumers of the API can call these functions without knowing whether the underlying allocator is block-based or custom—promoting modularity and future extensibility.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Custom Allocators</h1>
<p>If you wish to use a completely custom memory allocation implementation (for example, to integrate with an external memory manager), you can simply not include the default block-based implementation. Instead, implement your own custom allocation type and provide implementations for the allocator functions defined in <a class="el" href="alloc_8h_source.html">alloc.h</a>. Downstream consumers will use the same API regardless of the underlying implementation.</p>
<p>Below is an example of a custom allocator that uses POSIX malloc, realloc, and free:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/status.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Developer-defined custom allocator type.</span></div>
<div class="line"><span class="comment">// This type can store any context information needed by your allocator.</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> {</div>
<div class="line">    <span class="keywordtype">int</span> dummy;  <span class="comment">// Example context field.</span></div>
<div class="line">} <a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a>;</div>
<div class="line"><span class="preprocessor">#define JUNO_CUSTOM_ALLOC</span></div>
<div class="line"><span class="preprocessor">#include &quot;juno/memory/alloc.h&quot;</span></div>
<div class="line"><span class="comment">// The memory descriptor type is defined in the API as JUNO_MEMORY_T.</span></div>
<div class="line"><span class="comment">// Here, we will use it directly which contains:</span></div>
<div class="line"><span class="comment">//   void *pvAddr;   // Pointer to the allocated memory.</span></div>
<div class="line"><span class="comment">//   size_t zSize;   // Size of the allocation.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Custom implementation of the generic memory allocation functions.</span></div>
<div class="line"><span class="comment">// Downstream code will call these functions exactly as defined in alloc.h.</span></div>
<div class="line"> </div>
<div class="line">JUNO_STATUS_T Juno_MemoryGet(<a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> *ptMem, <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> *ptMemory, <span class="keywordtype">size_t</span> zSize) {</div>
<div class="line">    <span class="comment">// The ptMem parameter can be cast to your custom allocator type if needed.</span></div>
<div class="line">    (void)ptMem;  <span class="comment">// Unused in this simple example.</span></div>
<div class="line">    ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a> = malloc(zSize);</div>
<div class="line">    <span class="keywordflow">if</span> (ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a> == NULL) {</div>
<div class="line">        <span class="keywordflow">return</span> JUNO_STATUS_MEMALLOC_ERROR;</div>
<div class="line">    }</div>
<div class="line">    ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a981c345c95eba1755f12eeb37a0ef724">zSize</a> = zSize;</div>
<div class="line">    <span class="keywordflow">return</span> JUNO_STATUS_SUCCESS;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">JUNO_STATUS_T Juno_MemoryUpdate(<a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> *ptMem, <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> *ptMemory, <span class="keywordtype">size_t</span> zNewSize) {</div>
<div class="line">    (void)ptMem;  <span class="comment">// Unused in this simple example.</span></div>
<div class="line">    <span class="keywordtype">void</span> *pNew = realloc(ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a>, zNewSize);</div>
<div class="line">    <span class="keywordflow">if</span> (pNew == NULL) {</div>
<div class="line">        <span class="keywordflow">return</span> JUNO_STATUS_MEMALLOC_ERROR;</div>
<div class="line">    }</div>
<div class="line">    ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a> = pNew;</div>
<div class="line">    ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a981c345c95eba1755f12eeb37a0ef724">zSize</a> = zNewSize;</div>
<div class="line">    <span class="keywordflow">return</span> JUNO_STATUS_SUCCESS;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">JUNO_STATUS_T Juno_MemoryPut(<a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> *ptMem, <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> *ptMemory) {</div>
<div class="line">    (void)ptMem;  <span class="comment">// Unused in this simple example.</span></div>
<div class="line">    free(ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a>);</div>
<div class="line">    ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a> = NULL;</div>
<div class="line">    ptMemory-&gt;<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a981c345c95eba1755f12eeb37a0ef724">zSize</a> = 0;</div>
<div class="line">    <span class="keywordflow">return</span> JUNO_STATUS_SUCCESS;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// Create an instance of your custom allocator.</span></div>
<div class="line">    MY_CUSTOM_ALLOC_T myAllocStruct = { 0 };</div>
<div class="line">    <span class="comment">// We emulate a JUNO_MEMORY_ALLOC_T by casting the address of our custom allocator.</span></div>
<div class="line">    <a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> *pAlloc = (<a class="code hl_union" href="unionJUNO__MEMORY__ALLOC__TAG.html">JUNO_MEMORY_ALLOC_T</a> *)&amp;myAllocStruct;</div>
<div class="line">    <a class="code hl_struct" href="structJUNO__MEMORY__TAG.html">JUNO_MEMORY_T</a> memDesc = { 0 };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Allocate 128 bytes of memory.</span></div>
<div class="line">    <span class="keywordflow">if</span> (Juno_MemoryGet(pAlloc, &amp;memDesc, 128) != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Custom Juno_MemoryGet failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Use the memory (store a sample string).</span></div>
<div class="line">    strcpy((<span class="keywordtype">char</span> *)memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a>, <span class="stringliteral">&quot;Hello from Custom Allocator!&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;%s\n&quot;</span>, (<span class="keywordtype">char</span> *)memDesc.<a class="code hl_variable" href="structJUNO__MEMORY__TAG.html#a410362e1eb4aa6c8ace8c6f369c6fe2a">pvAddr</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Update allocation to 256 bytes.</span></div>
<div class="line">    <span class="keywordflow">if</span> (Juno_MemoryUpdate(pAlloc, &amp;memDesc, 256) != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Custom Juno_MemoryUpdate failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Free the allocation.</span></div>
<div class="line">    <span class="keywordflow">if</span> (Juno_MemoryPut(pAlloc, &amp;memDesc) != JUNO_STATUS_SUCCESS) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Custom Juno_MemoryPut failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="astructJUNO__MEMORY__TAG_html_a981c345c95eba1755f12eeb37a0ef724"><div class="ttname"><a href="structJUNO__MEMORY__TAG.html#a981c345c95eba1755f12eeb37a0ef724">JUNO_MEMORY_TAG::zSize</a></div><div class="ttdeci">size_t zSize</div><div class="ttdoc">Size of the allocated memory, in bytes.</div><div class="ttdef"><b>Definition</b> memory_types.h:58</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
How to Integrate Your Custom Allocator</h2>
<ol type="1">
<li><b>Implement Your Custom Allocator Type:</b> <br  />
 Define your own <code>JUNO_MEMORY_ALLOC_T</code> and any context information your allocator requires.</li>
<li><b>Provide the Allocator Function Implementations:</b> <br  />
 Implement the functions <code>Juno_MemoryGet</code>, <code>Juno_MemoryUpdate</code>, and <code>Juno_MemoryPut</code> exactly as they are prototyped in <a class="el" href="alloc_8h_source.html">alloc.h</a>. These functions will provide your custom memory management and can use any underlying mechanism (e.g., POSIX malloc, realloc, free).</li>
<li><b>Link Downstream Code Unchanged:</b> <br  />
 Downstream dependencies link against these functions via the <a class="el" href="alloc_8h_source.html">alloc.h</a> API, or implelement the function pointer API. They won’t need to know whether your implementation is custom or the default block-based allocator.</li>
</ol>
<p>By using this approach, you can seamlessly substitute the default memory manager with your custom implementation while maintaining API compatibility for all dependent code.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Additional Notes</h1>
<ul>
<li><b>Memory Alignment:</b> <br  />
 When declaring memory blocks with <code>JUNO_MEMORY_BLOCK</code>, ensure that the data types are properly aligned for your target platform.</li>
<li><b>Extensibility:</b> <br  />
 The API is designed to be extensible. If you wish to integrate custom memory allocation strategies, define <code>JUNO_CUSTOM_ALLOC</code> and provide your own implementation for the allocation union and associated operations.</li>
<li><b>Custom Allocator Behavior (JUNO_CUSTOM_ALLOC):</b> <br  />
 When <code>JUNO_CUSTOM_ALLOC</code> is defined, the default union <code>JUNO_MEMORY_ALLOC_T</code> (which includes both <code>tHdr</code> and <code>tBlock</code>) is not provided. In this case, you must implement your own memory allocation structure and functions that adhere to the generic API. This flexibility allows for seamless integration with third-party allocators or completely custom memory management mechanisms. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
